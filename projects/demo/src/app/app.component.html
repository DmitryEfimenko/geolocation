<div class="wrapper">
    <section>
        <p>
            Angular does not have any abstractions over Geolocation API. This is an
            Observer based abstraction over Geolocation API to use with Angular
        </p>
    </section>

    <div *ngIf="!!error">Sorry, position is not avalibale: {{ error.message }}</div>

    <section>
        <h3>How to use</h3>
        <p>
            Usage is pretty simple: just import service in your component and subscribe
            it. Observable will emit the Position object.
        </p>

        <pre><code [highlight]="sample">
            {{sample}}
        </code></pre>

        <p>You also can use async pipe</p>

        <pre><code [highlight]="sample_async">
            {{sample_async}}
        </code></pre>

        <div class="watch-position">
            <div class="switch-container">
                <label for="switcher" class="switch-container__text">
                    Track my position
                </label>
                <label class="switch">
                    <input id="switcher" type="checkbox" (click)="toggleWatch()" />
                    <span class="slider round"></span>
                </label>
            </div>

            <app-map *ngIf="!!toggle" [coordinatesChange]="position$ | async"></app-map>
        </div>

        <h4>Single position</h4>
        <div class="current-position">
            <p>
                If you need to get position just once and stop observing user location,
                you can subscribe to geolocation$ and use <code>take(1)</code> RxJs
                operator. Service is cold, meaning if there are no Subscribers, it doesn't
                track position
            </p>

            <button class="primary-button" (click)="getCurrentPosition()">
                Get my position!
            </button>

            <iframe
                *ngIf="!!currentPositionUrl"
                width="425"
                height="350"
                frameborder="0"
                scrolling="no"
                marginheight="0"
                marginwidth="0"
                [src]="currentPositionUrl"
            ></iframe>
        </div>
    </section>
</div>
