<div class="wrapper">
    <section>
        <p>
            Angular does not have any abstractions over Geolocation API. This is an
            Observer based abstraction over Geolocation API to use with Angular
        </p>
    </section>

    <div *ngIf="!!error">Sorry, position is not avalibale: {{ error.message }}</div>

    <section>
        <h3>How to use</h3>
        <p>
            Usage is pretty simple: just import service in your component and subscribe
            it. Observable will emit the Position object.
        </p>

        <h4>Single position</h4>
        <div class="current-position">
            <span>
                If you need to get position just once and stop observing user location,
                you can subscribe to geolocation$ and use take(1) RxJs operator:
            </span>
            <pre><code [highlight]="sample">
            {{samples}}
        </code></pre>
            <button class="primary-button" (click)="getCurrentPosition()">
                Get my position!
            </button>

            <iframe
                *ngIf="!!currentPositionUrl"
                width="425"
                height="350"
                frameborder="0"
                scrolling="no"
                marginheight="0"
                marginwidth="0"
                [src]="currentPositionUrl"
            ></iframe>
        </div>

        <h4>Observing position</h4>
        <div class="watch-position">
            <div class="switch-container">
                <label for="switcher" class="switch-container__text">watch me</label>
                <label class="switch">
                    <input id="switcher" type="checkbox" (click)="toggleWatch()" />
                    <span class="slider round"></span>
                </label>
            </div>

            <app-map *ngIf="!!position" [coordinatesChange]="position"></app-map>
            <ul *ngIf="!!position" class="coordinates">
                coordinates:

                <li>latitude: {{ position.coords.latitude }}</li>
                <li>longitude: {{ position.coords.longitude }}</li>
                <li>timestamp: {{ position.timestamp }}</li>
            </ul>
        </div>
    </section>
</div>
